<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport><meta name=description><title>Fine-Grained Bundling | Marko</title><link rel=icon sizes=32x32 href=/fav.png><link rel=icon type=image/svg+xml href=/fav.svg><link rel=preconnect href=https://GB0QQV5RQM-dsn.algolia.net crossorigin><script async type="module" crossorigin src="/assets/route.marko-D7y7utMs.js"></script><link rel="modulepreload" crossorigin href="/assets/_CZgNFQ7H.js"><link rel="modulepreload" crossorigin href="/assets/_C5fGj4jT.js"><link rel="modulepreload" crossorigin href="/assets/_C15qTADj.js"><link rel="stylesheet" crossorigin href="/assets/_layout-CoUqHVei.css"><link rel="stylesheet" crossorigin href="/assets/_layout-B-ZlsVz_.css"><link rel="stylesheet" crossorigin href="/assets/app-code-block-rYAtLWqr.css"></head><body><div id=root><header id=header><a title=Home href="/" id=_cx><picture><source srcset=/logo.svg#dark media=(prefers-color-scheme:dark)><img alt="Marko Logo" src=/logo.svg></picture></a><div class=_cv><a href=/docs>Docs</a><a href=/playground>Playground</a><a href=https://github.com/marko-js/marko>GitHub</a></div><button aria-pressed=false aria-label="Show menu" id=_cw></button><!--M_*6 2--><div id=_cy><button disabled aria-hidden=true></button></div><!--M_*6 3--></header><main><script>document.documentElement.classList.toggle("concise-mode",localStorage.getItem("concise-mode")==='true');</script><script>document.documentElement.classList.toggle("ts-mode",localStorage.getItem("ts-mode")==='true');</script><div class=_cT id=site-menu><nav class=_cU id=_cV><ul><li><strong>Introduction</strong><ul><li><a href=/docs/introduction/getting-started><!--M_[13-->Getting Started<!--M_]12 1--></a><!--M_*12 0--></li><li><a href=/docs/introduction/welcome-to-marko><!--M_[15-->Welcome to Marko!<!--M_]14 1--></a><!--M_*14 0--></li><li><a href=/docs/introduction/installation><!--M_[17-->Installation<!--M_]16 1--></a><!--M_*16 0--></li><li><a href=/docs/introduction/why-marko><!--M_[19-->Why Marko?<!--M_]18 1--></a><!--M_*18 0--></li></ul></li><li><strong>Tutorials</strong><ul><li><a href=/docs/tutorial/fundamentals><!--M_[21-->Fundamentals<!--M_]20 1--></a><!--M_*20 0--></li><li><a href=/docs/tutorial/app-from-scratch><!--M_[23-->App from Scratch<!--M_]22 1--></a><!--M_*22 0--></li><li><a href=/docs/tutorial/components-and-reactivity><!--M_[25-->Components and Reactivity<!--M_]24 1--></a><!--M_*24 0--></li><li><a href=/docs/tutorial/experienced-developers><!--M_[27-->Experienced Developers<!--M_]26 1--></a><!--M_*26 0--></li></ul></li><li><strong>Guides</strong><ul><li><a href=/docs/guide/existing-project><!--M_[29-->Existing Project<!--M_]28 1--></a><!--M_*28 0--></li><li><a href=/docs/guide/styling><!--M_[31-->Styling<!--M_]30 1--></a><!--M_*30 0--></li><li><a href=/docs/guide/low-level-apis><!--M_[33-->Low-Level APIs<!--M_]32 1--></a><!--M_*32 0--></li><li><a href=/docs/guide/publishing-components><!--M_[35-->Publishing Components<!--M_]34 1--></a><!--M_*34 0--></li><li><a href=/docs/guide/library-integration><!--M_[37-->Library Integration<!--M_]36 1--></a><!--M_*36 0--></li><li><a href=/docs/guide/csp><!--M_[39-->Content-Security Policy<!--M_]38 1--></a><!--M_*38 0--></li></ul></li><li><strong>Explanation</strong><ul><li><a href=/docs/explanation/streaming><!--M_[41-->Streaming<!--M_]40 1--></a><!--M_*40 0--></li><li><a href=/docs/explanation/targeted-compilation><!--M_[43-->Targeted Compilation<!--M_]42 1--></a><!--M_*42 0--></li><li><a href=/docs/explanation/fine-grained-bundling aria-current=true><!--M_[45-->Fine-Grained Bundling<!--M_]44 1--></a><!--M_*44 0--></li><li><a href=/docs/explanation/separation-of-concerns><!--M_[47-->Separation of Concerns<!--M_]46 1--></a><!--M_*46 0--></li><li><a href=/docs/explanation/optimizing-performance><!--M_[49-->Optimizing Performance<!--M_]48 1--></a><!--M_*48 0--></li><li><a href=/docs/explanation/forms><!--M_[51-->Working With Forms<!--M_]50 1--></a><!--M_*50 0--></li><li><a href=/docs/explanation/controllable-components><!--M_[53-->Controllable Components<!--M_]52 1--></a><!--M_*52 0--></li><li><a href=/docs/explanation/nested-reactivity><!--M_[55-->Nested Reactivity<!--M_]54 1--></a><!--M_*54 0--></li></ul></li><li><strong>Reference</strong><ul><li><a href=/docs/reference/language><!--M_[57-->Language<!--M_]56 1--></a><!--M_*56 0--></li><li><a href=/docs/reference/custom-tag><!--M_[59-->Custom Tags<!--M_]58 1--></a><!--M_*58 0--></li><li><a href=/docs/reference/reactivity><!--M_[61-->Reactivity<!--M_]60 1--></a><!--M_*60 0--></li><li><a href=/docs/reference/core-tag><!--M_[63-->Core Tags<!--M_]62 1--></a><!--M_*62 0--></li><li><a href=/docs/reference/native-tag><!--M_[65-->Native Tags<!--M_]64 1--></a><!--M_*64 0--></li><li><a href=/docs/reference/concise-syntax><!--M_[67-->Concise Syntax<!--M_]66 1--></a><!--M_*66 0--></li><li><a href=/docs/reference/template><!--M_[69-->Template API<!--M_]68 1--></a><!--M_*68 0--></li><li><a href=/docs/reference/typescript><!--M_[71-->TypeScript<!--M_]70 1--></a><!--M_*70 0--></li></ul></li><li><strong>Marko Run</strong><ul><li><a href=/docs/marko-run/getting-started><!--M_[73-->Getting Started<!--M_]72 1--></a><!--M_*72 0--></li><li><a href=/docs/marko-run/file-based-routing><!--M_[75-->File-based Routing<!--M_]74 1--></a><!--M_*74 0--></li><li><a href=/docs/marko-run/typescript><!--M_[77-->TypeScript<!--M_]76 1--></a><!--M_*76 0--></li></ul></li></ul></nav><div id=_cX><strong id=sM_1>Settings</strong><label class=_n><span>HTML<!--M_*78 1--></span><span class=_m><input type=checkbox aria-labelledby=sM_1><!--M_*78 3--><svg viewBox="0 0 576 512"><path d="M384 128c70.7 0 128 57.3 128 128s-57.3 128-128 128l-192 0c-70.7 0-128-57.3-128-128s57.3-128 128-128l192 0zM576 256c0-106-86-192-192-192L192 64C86 64 0 150 0 256S86 448 192 448l192 0c106 0 192-86 192-192zM192 352a96 96 0 1 0 0-192 96 96 0 1 0 0 192z"></path></svg><!--M_*79 0--></span><span>Concise<!--M_*78 5--></span></label><label class=_n><span>JS<!--M_*81 1--></span><span class=_m><input type=checkbox aria-labelledby=sM_1><!--M_*81 3--><svg viewBox="0 0 576 512"><path d="M384 128c70.7 0 128 57.3 128 128s-57.3 128-128 128l-192 0c-70.7 0-128-57.3-128-128s57.3-128 128-128l192 0zM576 256c0-106-86-192-192-192L192 64C86 64 0 150 0 256S86 448 192 448l192 0c106 0 192-86 192-192zM192 352a96 96 0 1 0 0-192 96 96 0 1 0 0 192z"></path></svg><!--M_*82 0--></span><span>TS<!--M_*81 5--></span></label></div></div><article id=_cZ><h1 id=fine-grained-bundling>Fine-Grained Bundling</h1><div class="markdown-alert markdown-alert-tldr"><p class=markdown-alert-title>Tldr</p><ul><li>Marko bundles only interactive JavaScript at compile time</li><li>Static content requires zero client-side JavaScript</li><li>Bundle size depends on interactivity, not architecture</li></ul></div><p>Marko uses <strong>compile-time analysis</strong> to generate minimal JavaScript bundles by identifying which parts of templates actually need interactivity. Instead of shipping entire component trees, only the code necessary for dynamic behavior reaches the browser. This means that Marko is <strong>zero-JS by default</strong>, and interactive pages only ship JavaScript for the parts that truly need it.</p><section id=sub-component-islands><h2><a href=#sub-component-islands>Sub-Component Islands</a></h2><p>From the beginning, Marko has used the <a href="https://www.patterns.dev/vanilla/islands-architecture/">islands architecture</a> to reduce JavaScript in each page bundle. In early versions, islands were determined at the <strong>component</strong> level. If any part of a component (Marko 5 and below) was interactive, then it was marked as a &quot;client component&quot; and its JavaScript was included.</p><p>Marko 6 and the Tags API extended this by determining islands at the <strong>sub-component</strong> level.</p><p>Consider a component that includes an interactive &quot;watch&quot; button:</p><div class=code-block><div class=filename>shop-item.marko</div><div class=html><pre class="shiki shiki-themes marko-light marko-dark s_8" tabindex="0"><code><span class="line"><span class="s_0">&#x3C;</span><span class="s_1">div</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">img</span><span class="s_2"> src</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">image</span><span class="s_2"> alt</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">name</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">h3</span><span class="s_0">></span><span class="s_4">${</span><span class="s_3">input</span><span class="s_0">.</span><span class="s_3">name</span><span class="s_4">}</span><span class="s_0">&#x3C;/</span><span class="s_1">h3</span><span class="s_0">></span></span>
<span class="line"><span class="s_5">  // Interactive toggle</span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_4">let</span><span class="s_0">/</span><span class="s_3">watching</span><span class="s_0">:</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">watching</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">button</span><span class="s_6"> onClick</span><span class="s_0">() {</span></span>
<span class="line"><span class="s_3">    watching</span><span class="s_3"> =</span><span class="s_1"> !</span><span class="s_3">watching</span><span class="s_0">;</span></span>
<span class="line"><span class="s_0">  }></span></span>
<span class="line"><span class="s_4">    ${</span><span class="s_3">watching</span><span class="s_1"> ?</span><span class="s_7"> "watching"</span><span class="s_1"> :</span><span class="s_7"> "watch"</span><span class="s_4">}</span></span>
<span class="line"><span class="s_0">  &#x3C;/</span><span class="s_1">button</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">&#x3C;/</span><span class="s_1">div</span><span class="s_0">></span></span></code></pre></div><div class=concise><pre class="shiki shiki-themes marko-light marko-dark s_8" tabindex="0"><code><span class="line"><span class="s_1">div</span></span>
<span class="line"><span class="s_1">  img</span><span class="s_2"> src</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">image</span><span class="s_2"> alt</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">name</span></span>
<span class="line"><span class="s_1">  h3</span><span class="s_0"> -- </span><span class="s_4">${</span><span class="s_3">input</span><span class="s_0">.</span><span class="s_3">name</span><span class="s_4">}</span></span>
<span class="line"><span class="s_5">  // Interactive toggle</span></span>
<span class="line"><span class="s_4">  let</span><span class="s_0">/</span><span class="s_3">watching</span><span class="s_0">:</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">watching</span></span>
<span class="line"><span class="s_1">  button</span><span class="s_6"> onClick</span><span class="s_0">() {</span></span>
<span class="line"><span class="s_3">    watching</span><span class="s_3"> =</span><span class="s_1"> !</span><span class="s_3">watching</span><span class="s_0">;</span></span>
<span class="line"><span class="s_0">  }</span></span>
<span class="line"><span class="s_0">    -- </span><span class="s_4">${</span><span class="s_3">watching</span><span class="s_1"> ?</span><span class="s_7"> "watching"</span><span class="s_1"> :</span><span class="s_7"> "watch"</span><span class="s_4">}</span></span></code></pre></div><div class=html-ts><pre class="shiki shiki-themes marko-light marko-dark s_8" tabindex="0"><code><span class="line"><span class="s_0">&#x3C;</span><span class="s_1">div</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">img</span><span class="s_2"> src</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">image</span><span class="s_2"> alt</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">name</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">h3</span><span class="s_0">></span><span class="s_4">${</span><span class="s_3">input</span><span class="s_0">.</span><span class="s_3">name</span><span class="s_4">}</span><span class="s_0">&#x3C;/</span><span class="s_1">h3</span><span class="s_0">></span></span>
<span class="line"><span class="s_5">  // Interactive toggle</span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_4">let</span><span class="s_0">/</span><span class="s_3">watching</span><span class="s_0">:</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">watching</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">button</span><span class="s_6"> onClick</span><span class="s_0">() {</span></span>
<span class="line"><span class="s_3">    watching</span><span class="s_3"> =</span><span class="s_1"> !</span><span class="s_3">watching</span><span class="s_0">;</span></span>
<span class="line"><span class="s_0">  }></span></span>
<span class="line"><span class="s_4">    ${</span><span class="s_3">watching</span><span class="s_1"> ?</span><span class="s_7"> "watching"</span><span class="s_1"> :</span><span class="s_7"> "watch"</span><span class="s_4">}</span></span>
<span class="line"><span class="s_0">  &#x3C;/</span><span class="s_1">button</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">&#x3C;/</span><span class="s_1">div</span><span class="s_0">></span></span></code></pre></div><div class=concise-ts><pre class="shiki shiki-themes marko-light marko-dark s_8" tabindex="0"><code><span class="line"><span class="s_1">div</span></span>
<span class="line"><span class="s_1">  img</span><span class="s_2"> src</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">image</span><span class="s_2"> alt</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">name</span></span>
<span class="line"><span class="s_1">  h3</span><span class="s_0"> -- </span><span class="s_4">${</span><span class="s_3">input</span><span class="s_0">.</span><span class="s_3">name</span><span class="s_4">}</span></span>
<span class="line"><span class="s_5">  // Interactive toggle</span></span>
<span class="line"><span class="s_4">  let</span><span class="s_0">/</span><span class="s_3">watching</span><span class="s_0">:</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">watching</span></span>
<span class="line"><span class="s_1">  button</span><span class="s_6"> onClick</span><span class="s_0">() {</span></span>
<span class="line"><span class="s_3">    watching</span><span class="s_3"> =</span><span class="s_1"> !</span><span class="s_3">watching</span><span class="s_0">;</span></span>
<span class="line"><span class="s_0">  }</span></span>
<span class="line"><span class="s_0">    -- </span><span class="s_4">${</span><span class="s_3">watching</span><span class="s_1"> ?</span><span class="s_7"> "watching"</span><span class="s_1"> :</span><span class="s_7"> "watch"</span><span class="s_4">}</span></span></code></pre></div></div><style>.s_0{--shiki-light:#202124;--shiki-dark:#FFF}.s_1{--shiki-light:#D91880;--shiki-dark:#FF4185}.s_2{--shiki-light:#46821C;--shiki-dark:#A6E22E}.s_3{--shiki-light:#202124;--shiki-dark:#FFFFFF}.s_4{--shiki-light:#0D7BBF;--shiki-dark:#66D9EF}.s_5{--shiki-light:#73738C;--shiki-dark:#8F8F9E}.s_6{--shiki-light:#0D7BBF;--shiki-light-font-style:italic;--shiki-dark:#66D9EF;--shiki-dark-font-style:italic}.s_7{--shiki-light:#8A720A;--shiki-dark:#FFF066}.s_8{--shiki-light:#202124;--shiki-dark:#FFF;--shiki-light-bg:#00000000;--shiki-dark-bg:#00000000}</style><p>Only the JavaScript for toggling <code>watching</code> and updating the button text is included. JavaScript for rendering static content or creating the button element is not included.</p></section><section id=automatic-optimization><h2><a href=#automatic-optimization>Automatic Optimization</a></h2><p>Marko&#39;s compiler automatically determines what needs JavaScript without manual configuration.</p><p>Whether an application is structured as one large component or split into many small ones, the bundle size remains the same—determined purely by the amount of interactivity, not by component architecture. The compiler extracts only the interactive portions regardless of how the code is organized. This way, component can be split up according to <a href=./separation-of-concerns>separation of concerns</a>.</p><p>This creates a development experience where good performance emerges naturally from the compilation process. Architectural decisions become about maintainability and developer experience, while the compiler handles optimization automatically.</p></section><hr><section id=_c0><h2 id=contributors><a href=#contributors>Contributors</a></h2><p>Helpful? You can thank these awesome people! You can also edit this doc if you see any issues or want to improve it.</p><script>(e=>(self[e]=(l,d=e+l,f=d.length,o={},n=[],s=document,t=s.createTreeWalker(s,129))=>s=self[e][l]={i:d,d:s,l:o,v:n,x(){},w(e,l,x){for(;e=t.nextNode();)s.x(l=(l=e.data)&&!l.indexOf(d)&&(o[x=l.slice(f+1)]=e,l[f]),x,e),l>"#"&&n.push(e)}},self[e]))("M")("_");M._.r=[_=>(_.U=[{params:{},url:new URL("http://localhost/docs/explanation/fine-grained-bundling")},5,{4:!1},_.b={0:_.a={3:"concise-mode"},1:9,3:_.c={3:"ts-mode"},4:11,43:_.e={10:_.d={"aria-labelledby":"sM_1",checked:!1},f3:0},44:_.g={10:_.f={"aria-labelledby":"sM_1",checked:!1},f3:0},45:!1,46:!1,48:"sM_1"},_.a,1,_.c,1,{d1:_.h={},c1:"n5"},_.h,{d1:_.i={},c1:"n6"},_.i,{d1:_.j={},c1:"n7"},_.j,{d1:_.k={},c1:"n8"},_.k,{d1:_.l={},c1:"n9"},_.l,{d1:_.m={},c1:"n10"},_.m,{d1:_.n={},c1:"n11"},_.n,{d1:_.o={},c1:"n12"},_.o,{d1:_.p={},c1:"n13"},_.p,{d1:_.q={},c1:"n14"},_.q,{d1:_.r={},c1:"n15"},_.r,{d1:_.s={},c1:"n16"},_.s,{d1:_.t={},c1:"n17"},_.t,{d1:_.u={},c1:"n18"},_.u,{d1:_.v={},c1:"n19"},_.v,{d1:_.w={},c1:"n20"},_.w,{d1:_.x={},c1:"n21"},_.x,{d1:_.y={},c1:"n22"},_.y,{d1:_.z={},c1:"n23"},_.z,{d1:_.A={},c1:"n24"},_.A,{d1:_.B={},c1:"n25"},_.B,{d1:_.C={},c1:"n26"},_.C,{d1:_.D={},c1:"n27"},_.D,{d1:_.E={},c1:"n28"},_.E,{d1:_.F={},c1:"n29"},_.F,{d1:_.G={},c1:"n30"},_.G,{d1:_.H={},c1:"n31"},_.H,{d1:_.I={},c1:"n32"},_.I,{d1:_.J={},c1:"n33"},_.J,{d1:_.K={},c1:"n34"},_.K,{d1:_.L={},c1:"n35"},_.L,{d1:_.M={},c1:"n36"},_.M,{d1:_.N={},c1:"n37"},_.N,_.e,{5:{},7:576,8:512},1,_.g,{5:{},7:576,8:512},2,_.O={11:_.P={}},2,{6:"marko"},3,_.R={m0:new Map(_.Q=[[0,_.S={5:"sub-component-islands",7:[]}],[1,_.T={5:"automatic-optimization",7:[]}]]),_:_.O},_.S,_.T],_.a.f=_._.d0(_.a),_.a.e=_._.n2(_.b),_.c.f=_._.d0(_.c),_.c.e=_._.n3(_.b),_.d.checkedChange=_.e.e3=_._.n0(_.b),_.f.checkedChange=_.g.e3=_._.n1(_.b),_.P.content=_._.i1(_.O),_.S._=_.T._=_.R,_.U),"g2",5,"m2",6,"m3",6,"d1",8,10,"b0",79,"p0",78,"b0",82,"p0",81,"n38",7,"n39",7];M._.w()</script><ul><li><a href=https://github.com/LuLaValva><img src=https://avatars.githubusercontent.com/u/26027232?v=4 alt>LuLaValva</a></li><li><a href=https://github.com/marko-js/website-next/blob/main/docs/explanation/fine-grained-bundling.md><div><svg viewBox="0 0 448 512"><path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"></path></svg><!--M_*99 0--></div>You?</a></li></ul></section></article><div class=_cT id=page-menu><nav aria-labelledby=sM_2 class=_cU id=_cY><ul><li><strong id=sM_2>On this Page</strong></li><li><a href=#sub-component-islands>Sub-Component Islands<!--M_*93 1--></a><!--M_*93 0--><!--M_|93 2--></li><li><a href=#automatic-optimization>Automatic Optimization<!--M_*94 1--></a><!--M_*94 0--><!--M_|94 2--></li><!--M_|92 0 94 93--></ul></nav></div></main></div><footer id=_a><a href="https://openjsf.org/" class=_b><img src=/assets/openjsf-u4IcyPV8.svg alt> <span><span class=_e>OpenJS&nbsp;</span><span class=_f>Foundation</span></span></a><div class=_g></div><a href=https://github.com/marko-js/marko/blob/main/LICENSE class=_d><img src=/assets/osi-BEF6Mbrt.svg alt> MIT&nbsp;License</a><div class=_g></div><a href=https://github.com/eBay class=_c><img src=/assets/ebay-CSr9mcj_.svg alt=eBay> open&nbsp;source</a></footer><script>M._.r.push(_=>(_.V=[4,{5:{},7:448,8:512}]),"b0",99,"i0",93,94);M._.w()</script></body></html>