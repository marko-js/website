<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="The Marko programming language"><title>Fine-Grained Bundling | Marko</title><link rel=icon sizes=32x32 href=/fav.png><link rel=icon type=image/svg+xml href=/fav.svg><link rel=preconnect href=https://GB0QQV5RQM-dsn.algolia.net crossorigin><script async type="module" crossorigin src="/assets/docs.explanation.fine-grained-bundling-DqW4dAU2.js"></script><link rel="modulepreload" crossorigin href="/assets/_BRcusyKb.js"><link rel="modulepreload" crossorigin href="/assets/_WkV31hVV.js"><link rel="modulepreload" crossorigin href="/assets/_BBou4r_B.js"><link rel="stylesheet" crossorigin href="/assets/_layout-BcD9Kuto.css"><link rel="stylesheet" crossorigin href="/assets/_layout-hmI-Y7H7.css"><link rel="stylesheet" crossorigin href="/assets/app-code-block-DzvS1Xn3.css"></head><body><div id=root><header id=header><a title=Home href="/" id=_cZ><picture><source srcset=/logo.svg#dark media=(prefers-color-scheme:dark)><img alt="Marko Logo" src=/logo.svg></picture></a><div class=_cX><a href=/docs>Docs</a><a href=/playground>Playground</a><a href=https://github.com/marko-js/marko>GitHub</a></div><button aria-pressed=false aria-label="Show menu" id=_cY></button><!--M_*6 2--><div id=_c0><button disabled aria-hidden=true></button></div><!--M_*6 3--></header><main><script>document.documentElement.classList.toggle("concise-mode",localStorage.getItem("concise-mode")==='true');</script><script>document.documentElement.classList.toggle("ts-mode",localStorage.getItem("ts-mode")==='true');</script><div class=_de id=site-menu><nav class=_df id=_dg><ul><li><strong>Introduction</strong><ul><li><a href=/docs/introduction/getting-started>Getting Started</a></li><li><a href=/docs/introduction/welcome-to-marko>Welcome to Marko!</a></li><li><a href=/docs/introduction/installation>Installation</a></li><li><a href=/docs/introduction/why-marko>Why Marko?</a></li><li><a href=/docs/introduction/integrations>Integrations</a></li></ul></li><li><strong>Tutorials</strong><ul><li><a href=/docs/tutorial/fundamentals>Fundamentals</a></li><li><a href=/docs/tutorial/components-and-reactivity>Components and Reactivity</a></li></ul></li><li><strong>Guides</strong><ul><li><a href=/docs/guide/styling>Styling</a></li></ul></li><li><strong>Explanation</strong><ul><li><a href=/docs/explanation/streaming>Streaming</a></li><li><a href=/docs/explanation/targeted-compilation>Targeted Compilation</a></li><li><a href=/docs/explanation/fine-grained-bundling aria-current=true>Fine-Grained Bundling</a></li><li><a href=/docs/explanation/separation-of-concerns>Separation of Concerns</a></li><li><a href=/docs/explanation/controllable-components>Controllable Components</a></li><li><a href=/docs/explanation/nested-reactivity>Nested Reactivity</a></li><li><a href=/docs/explanation/immutable-state>Immutable State</a></li><li><a href=/docs/explanation/serializable-state>Serializable State</a></li></ul></li><li><strong>Reference</strong><ul><li><a href=/docs/reference/language>Language</a></li><li><a href=/docs/reference/custom-tag>Custom Tags</a></li><li><a href=/docs/reference/reactivity>Reactivity</a></li><li><a href=/docs/reference/core-tag>Core Tags</a></li><li><a href=/docs/reference/native-tag>Native Tags</a></li><li><a href=/docs/reference/concise-syntax>Concise Syntax</a></li><li><a href=/docs/reference/template>Template API</a></li><li><a href=/docs/reference/typescript>TypeScript</a></li></ul></li><li><strong>Marko Run</strong><ul><li><a href=/docs/marko-run/getting-started>Getting Started</a></li><li><a href=/docs/marko-run/file-based-routing>File-based Routing</a></li><li><a href=/docs/marko-run/typescript>TypeScript</a></li></ul></li></ul></nav><div id=_di><label class=_dj>Version&nbsp;<select><option value selected>6.x</option><option value=https://v5.markojs.com/docs/getting-started>5.x</option><option value="http://marko-v4.github.io/docs/">4.x</option><option value="http://v3.markojs.com/docs/">3.x</option><option value="http://marko-v2.github.io/docs/">2.x</option></select><!--M_*7 37--></label><label class=_n><span>HTML<!--M_*66 1--></span><span class=_m><input type=checkbox aria-label="Toggle Concise mode"><!--M_*66 3--><svg viewBox="0 0 576 512"><path d="M384 128c70.7 0 128 57.3 128 128S454.7 384 384 384l-192 0c-70.7 0-128-57.3-128-128s57.3-128 128-128l192 0zM576 256c0-106-86-192-192-192L192 64C86 64 0 150 0 256S86 448 192 448l192 0c106 0 192-86 192-192zM192 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"></path></svg><!--M_*67 0--></span><span>Concise<!--M_*66 5--></span></label><label class=_n><span>JS<!--M_*69 1--></span><span class=_m><input type=checkbox aria-label="Toggle TS mode"><!--M_*69 3--><svg viewBox="0 0 576 512"><path d="M384 128c70.7 0 128 57.3 128 128S454.7 384 384 384l-192 0c-70.7 0-128-57.3-128-128s57.3-128 128-128l192 0zM576 256c0-106-86-192-192-192L192 64C86 64 0 150 0 256S86 448 192 448l192 0c106 0 192-86 192-192zM192 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"></path></svg><!--M_*70 0--></span><span>TS<!--M_*69 5--></span></label></div></div><article id=_dl><h1 id=fine-grained-bundling>Fine-Grained Bundling</h1><callout role=note aria-labelledby=callout-cot-0 class=admonition-tldr><cot id=callout-cot-0>TL;DR</cot><ul><li>Marko bundles only interactive JavaScript at compile time</li><li>Static content requires zero client-side JavaScript</li><li>Bundle size depends on interactivity, not architecture</li></ul></callout><p>Marko uses <strong>compile-time analysis</strong> to generate minimal JavaScript bundles by identifying which parts of templates actually need interactivity. Instead of shipping entire component trees, only the code necessary for dynamic behavior reaches the browser. This means that Marko is <strong>zero-JS by default</strong>, and interactive pages only ship JavaScript for the parts that truly need it.</p><section id=beyond-islands><h2><a href=#beyond-islands>Beyond Islands</a></h2><p>Some frameworks, including older versions of Marko, use the <a href="https://www.patterns.dev/vanilla/islands-architecture/">islands architecture</a> to reduce JavaScript in each page bundle. Islands are determined at the <strong>component</strong> level, so applications authored in an islands-based framework need clear distinction between <em>server</em> components and <em>client</em> components.</p><p>In Marko 6 the compiler decides which code to is interactive based on the <em>state</em> tree, and only includes what is necessary in the browser bundle. Consider this tag that includes an interactive &quot;watch&quot; button:</p><div class=code-block><div class=filename>shop-item.marko</div><div class="html html-ts"><pre class="shiki shiki-themes marko-light marko-dark s_7" tabindex="0"><code><span class="line"><span class="s_0">&#x3C;</span><span class="s_1">div</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">h3</span><span class="s_0">></span><span class="s_2">${</span><span class="s_3">input</span><span class="s_0">.</span><span class="s_3">name</span><span class="s_2">}</span><span class="s_0">&#x3C;/</span><span class="s_1">h3</span><span class="s_0">></span></span>
<span class="line"></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_2">${</span><span class="s_3">input</span><span class="s_0">.</span><span class="s_3">content</span><span class="s_2">}</span><span class="s_0">/></span></span>
<span class="line"><span class="s_4">  // Interactive toggle</span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_2">let</span><span class="s_0">/</span><span class="s_3">watching</span><span class="s_0">:</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">watching</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">button</span><span class="s_5"> onClick</span><span class="s_0">() { </span><span class="s_3">watching</span><span class="s_3"> =</span><span class="s_1"> !</span><span class="s_3">watching</span><span class="s_0"> }></span></span>
<span class="line"><span class="s_2">    ${</span><span class="s_3">watching</span><span class="s_1"> ?</span><span class="s_6"> "watching"</span><span class="s_1"> :</span><span class="s_6"> "watch"</span><span class="s_2">}</span></span>
<span class="line"><span class="s_0">  &#x3C;/</span><span class="s_1">button</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">&#x3C;/</span><span class="s_1">div</span><span class="s_0">></span></span></code></pre></div><div class="concise concise-ts"><pre class="shiki shiki-themes marko-light marko-dark s_7" tabindex="0"><code><span class="line"><span class="s_1">div</span></span>
<span class="line"><span class="s_1">  h3</span><span class="s_0"> -- </span><span class="s_2">${</span><span class="s_3">input</span><span class="s_0">.</span><span class="s_3">name</span><span class="s_2">}</span></span>
<span class="line"></span>
<span class="line"><span class="s_2">  ${</span><span class="s_3">input</span><span class="s_0">.</span><span class="s_3">content</span><span class="s_2">}</span></span>
<span class="line"><span class="s_4">  // Interactive toggle</span></span>
<span class="line"><span class="s_2">  let</span><span class="s_0">/</span><span class="s_3">watching</span><span class="s_0">:</span><span class="s_3">=input</span><span class="s_0">.</span><span class="s_3">watching</span></span>
<span class="line"><span class="s_1">  button</span><span class="s_5"> onClick</span><span class="s_0">() { </span><span class="s_3">watching</span><span class="s_3"> =</span><span class="s_1"> !</span><span class="s_3">watching</span><span class="s_0"> }</span></span>
<span class="line"><span class="s_0">    -- </span><span class="s_2">${</span><span class="s_3">watching</span><span class="s_1"> ?</span><span class="s_6"> "watching"</span><span class="s_1"> :</span><span class="s_6"> "watch"</span><span class="s_2">}</span></span></code></pre></div></div><style>.s_0{--shiki-light:#202124;--shiki-dark:#FFF}.s_1{--shiki-light:#D91880;--shiki-dark:#FF4185}.s_2{--shiki-light:#0D7BBF;--shiki-dark:#66D9EF}.s_3{--shiki-light:#202124;--shiki-dark:#FFFFFF}.s_4{--shiki-light:#73738C;--shiki-dark:#8F8F9E}.s_5{--shiki-light:#0D7BBF;--shiki-light-font-style:italic;--shiki-dark:#66D9EF;--shiki-dark-font-style:italic}.s_6{--shiki-light:#8A720A;--shiki-dark:#FFF066}.s_7{--shiki-light:#202124;--shiki-dark:#FFF;--shiki-light-bg:#00000000;--shiki-dark-bg:#00000000}</style><p>Only the JavaScript for toggling <code>watching</code> and updating the button text is included. JavaScript for rendering static content or creating the button element is not included.</p></section><section id=automatic-optimization><h2><a href=#automatic-optimization>Automatic Optimization</a></h2><p>Marko&#39;s compiler automatically determines what needs JavaScript without manual configuration.</p><p>Whether an application is structured as one large component or split into many small ones, the bundle size remains the sameâ€”determined purely by the amount of interactivity, not by component architecture. The compiler extracts only the interactive portions regardless of how the code is organized. This way, component can be split up according to <a href=./separation-of-concerns>separation of concerns</a>.</p><p>This creates a development experience where good performance emerges naturally from the compilation process. Architectural decisions become about maintainability and developer experience, while the compiler handles optimization automatically.</p></section><hr><section id=_dm><h2 id=contributors><a href=#contributors>Contributors</a></h2><p>Helpful? You can thank these awesome people! You can also edit this doc if you see any issues or want to improve it.</p><script>(e=>(self[e]||(self[e]=(l,f=e+l,s=f.length,a={},d=[],t=document,n=t.createTreeWalker(t,129))=>t=self[e][l]={i:f,d:t,l:a,v:d,x(){},w(e,l,r){for(;e=n.nextNode();)t.x(l=(l=e.data)&&!l.indexOf(f)&&(a[r=l.slice(s+1)]=e,l[s]),r,e),l>"#"&&d.push(e)}}),self[e]))("M")("_");M._.r=[_=>(_.g=[{params:{},url:new URL("http://localhost/docs/explanation/fine-grained-bundling")},5,{4:!1},_.h={0:_.a={3:"concise-mode"},1:9,3:_.b={3:"ts-mode"},4:11,38:_.d={10:_.c={"aria-label":"Toggle Concise mode",checked:!1},f3:0},39:_.f={10:_.e={"aria-label":"Toggle TS mode",checked:!1},f3:0},40:!1,41:!1},_.a,1,_.b,55,_.d,{5:{},7:576,8:512},1,_.f,{5:{},7:576,8:512},12,{5:"beyond-islands"},{5:"automatic-optimization"}],_.a.f=_._.e0(_.a),_.a.e=_._.o2(_.h),_.b.f=_._.e0(_.b),_.b.e=_._.o3(_.h),_.c.checkedChange=_.d.e3=_._.o0(_.h),_.e.checkedChange=_.f.e3=_._.o1(_.h),_.g),"h0",5,"n0",6,"n1",6,"e1",8,10,"c0",67,"q0",66,"c0",70,"q0",69,"o32",7,"o33",7,"o34",7];M._.w()</script><ul><li><a href=https://github.com/LuLaValva><img src=https://avatars.githubusercontent.com/u/26027232?v=4 alt>LuLaValva</a></li><li><a href=https://github.com/marko-js/website-next/blob/main/docs/explanation/fine-grained-bundling.md><div><svg viewBox="0 0 448 512"><path d="M256 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 160-160 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l160 0 0 160c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160 160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-160 0 0-160z"></path></svg><!--M_*89 0--></div>You?</a></li></ul></section></article><div class=_de id=page-menu><nav aria-labelledby=sM_1 class=_df id=_dk><ul><li><strong id=sM_1>On this Page</strong></li><li><a href=#beyond-islands>Beyond Islands</a><!--M_*83 0--></li><li><a href=#automatic-optimization>Automatic Optimization</a><!--M_*84 0--></li></ul></nav></div></main></div><footer id=_a><a href="https://openjsf.org/" class=_b><img src=/assets/openjsf-u4IcyPV8.svg alt> <span><span class=_e>OpenJS&nbsp;</span><span class=_f>Foundation</span></span></a><div class=_g></div><a href=https://github.com/marko-js/marko/blob/main/LICENSE class=_d><img src=/assets/osi-BEF6Mbrt.svg alt> MIT&nbsp;License</a><div class=_g></div><a href=https://github.com/eBay class=_c><img src=/assets/ebay-CSr9mcj_.svg alt=eBay> open&nbsp;source</a></footer><script>M._.r.push(_=>(_.i=[4,{5:{},7:448,8:512}]),"c0",89,"j0",83,84);M._.w()</script></body></html>