<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="The Marko programming language"><title>What About Separation of Concerns? | Marko</title><link rel=icon sizes=32x32 href=/fav.png><link rel=icon type=image/svg+xml href=/fav.svg><link rel=preconnect href=https://GB0QQV5RQM-dsn.algolia.net crossorigin><script async type="module" crossorigin src="/assets/docs.explanation.separation-of-concerns-D_GFhAoq.js"></script><link rel="modulepreload" crossorigin href="/assets/_DXYJlE3B.js"><link rel="modulepreload" crossorigin href="/assets/_D4OQmHgy.js"><link rel="modulepreload" crossorigin href="/assets/_THfjy09c.js"><link rel="stylesheet" crossorigin href="/assets/_layout-BJiym8XD.css"><link rel="stylesheet" crossorigin href="/assets/_layout-hmI-Y7H7.css"><link rel="stylesheet" crossorigin href="/assets/app-code-block-DzvS1Xn3.css"></head><body><div id=root><header id=header><a title=Home href="/" id=_cT><picture><source srcset=/logo.svg#dark media=(prefers-color-scheme:dark)><img alt="Marko Logo" src=/logo.svg></picture></a><div class=_cR><a href=/docs>Docs</a><a href=/playground>Playground</a><a href=https://github.com/marko-js/marko>GitHub</a></div><button aria-pressed=false aria-label="Show menu" id=_cS></button><!--M_*6 2--><div id=_cU><button disabled aria-hidden=true></button></div><!--M_*6 3--></header><main><script>document.documentElement.classList.toggle("concise-mode",localStorage.getItem("concise-mode")==='true');</script><script>document.documentElement.classList.toggle("ts-mode",localStorage.getItem("ts-mode")==='true');</script><div class=_de id=site-menu><nav class=_df id=_dg><ul><li><strong>Introduction</strong><ul><li><a href=/docs/introduction/getting-started>Getting Started</a></li><li><a href=/docs/introduction/welcome-to-marko>Welcome to Marko!</a></li><li><a href=/docs/introduction/installation>Installation</a></li><li><a href=/docs/introduction/why-marko>Why Marko?</a></li><li><a href=/docs/introduction/integrations>Integrations</a></li></ul></li><li><strong>Tutorials</strong><ul><li><a href=/docs/tutorial/fundamentals>Fundamentals</a></li><li><a href=/docs/tutorial/components-and-reactivity>Components and Reactivity</a></li></ul></li><li><strong>Guides</strong><ul><li><a href=/docs/guide/styling>Styling</a></li></ul></li><li><strong>Explanation</strong><ul><li><a href=/docs/explanation/streaming>Streaming</a></li><li><a href=/docs/explanation/targeted-compilation>Targeted Compilation</a></li><li><a href=/docs/explanation/fine-grained-bundling>Fine-Grained Bundling</a></li><li><a href=/docs/explanation/separation-of-concerns aria-current=true>Separation of Concerns</a></li><li><a href=/docs/explanation/controllable-components>Controllable Components</a></li><li><a href=/docs/explanation/nested-reactivity>Nested Reactivity</a></li><li><a href=/docs/explanation/immutable-state>Immutable State</a></li><li><a href=/docs/explanation/serializable-state>Serializable State</a></li></ul></li><li><strong>Reference</strong><ul><li><a href=/docs/reference/language>Language</a></li><li><a href=/docs/reference/custom-tag>Custom Tags</a></li><li><a href=/docs/reference/reactivity>Reactivity</a></li><li><a href=/docs/reference/core-tag>Core Tags</a></li><li><a href=/docs/reference/native-tag>Native Tags</a></li><li><a href=/docs/reference/concise-syntax>Concise Syntax</a></li><li><a href=/docs/reference/template>Template API</a></li><li><a href=/docs/reference/typescript>TypeScript</a></li></ul></li><li><strong>Marko Run</strong><ul><li><a href=/docs/marko-run/getting-started>Getting Started</a></li><li><a href=/docs/marko-run/file-based-routing>File-based Routing</a></li><li><a href=/docs/marko-run/typescript>TypeScript</a></li></ul></li></ul></nav><div id=_di><label class=_dj>Version&nbsp;<select><option value selected>6.x</option><option value=https://v5.markojs.com/docs/getting-started>5.x</option><option value="http://marko-v4.github.io/docs/">4.x</option><option value="http://v3.markojs.com/docs/">3.x</option><option value="http://marko-v2.github.io/docs/">2.x</option></select><!--M_*7 37--></label><label class=_n><span>HTML<!--M_*66 1--></span><span class=_m><input type=checkbox aria-label="Toggle Concise mode"><!--M_*66 3--><svg viewBox="0 0 576 512"><path d="M384 128c70.7 0 128 57.3 128 128S454.7 384 384 384l-192 0c-70.7 0-128-57.3-128-128s57.3-128 128-128l192 0zM576 256c0-106-86-192-192-192L192 64C86 64 0 150 0 256S86 448 192 448l192 0c106 0 192-86 192-192zM192 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"></path></svg><!--M_*67 0--></span><span>Concise<!--M_*66 5--></span></label><label class=_n><span>JS<!--M_*69 1--></span><span class=_m><input type=checkbox aria-label="Toggle TS mode"><!--M_*69 3--><svg viewBox="0 0 576 512"><path d="M384 128c70.7 0 128 57.3 128 128S454.7 384 384 384l-192 0c-70.7 0-128-57.3-128-128s57.3-128 128-128l192 0zM576 256c0-106-86-192-192-192L192 64C86 64 0 150 0 256S86 448 192 448l192 0c106 0 192-86 192-192zM192 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"></path></svg><!--M_*70 0--></span><span>TS<!--M_*69 5--></span></label></div></div><article id=_dl><h1 id=what-about-separation-of-concerns>What About Separation of Concerns?</h1><callout role=note aria-labelledby=callout-cot-0 class=admonition-tldr><cot id=callout-cot-0>TL;DR</cot><p>Marko&#39;s approach doesn&#39;t violate separation of concerns, it applies the principle more correctly than traditional technology-based separation.</p></callout><p>When developers first encounter Marko&#39;s Tags API, which allows tight coupling of component logic with structure and styling, a common concern arises: &quot;Isn&#39;t this a violation of separation of concerns?&quot;</p><p>This question touches on one of the most fundamental principles in software engineering, but it also reveals a fundamental misunderstanding about what &quot;concerns&quot; actually are.</p><section id=the-actual-concerns><h2><a href=#the-actual-concerns>The Actual Concerns</a></h2><p>Consider a simple user interface component: a modal dialog. In traditional file-based separation, we organize it like this:</p><div class=code-block><div class=filename>modal.html</div><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_0">&#x3C;</span><span class="s_1">button</span><span class="s_2"> id</span><span class="s_0">=</span><span class="s_3">"open-modal"</span><span class="s_0">>Open Modal&#x3C;/</span><span class="s_1">button</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">&#x3C;</span><span class="s_1">div</span><span class="s_2"> id</span><span class="s_0">=</span><span class="s_3">"modal"</span><span class="s_2"> class</span><span class="s_0">=</span><span class="s_3">"modal"</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">button</span><span class="s_2"> id</span><span class="s_0">=</span><span class="s_3">"close-modal"</span><span class="s_0">>Ã—&#x3C;/</span><span class="s_1">button</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">p</span><span class="s_0">>Modal content...&#x3C;/</span><span class="s_1">p</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">&#x3C;/</span><span class="s_1">div</span><span class="s_0">></span></span></code></pre></div><style>.s_0{--shiki-light:#202124;--shiki-dark:#FFF}.s_1{--shiki-light:#D91880;--shiki-dark:#FF4185}.s_2{--shiki-light:#46821C;--shiki-dark:#A6E22E}.s_3{--shiki-light:#8A720A;--shiki-dark:#FFF066}.s_4{--shiki-light:#202124;--shiki-dark:#FFF;--shiki-light-bg:#00000000;--shiki-dark-bg:#00000000}</style><div class=code-block><div class=filename>modal.css</div><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_2">.modal</span><span class="s_0"> {</span></span>
<span class="line"><span class="s_5">  display</span><span class="s_0">: </span><span class="s_6">none</span><span class="s_0">;</span></span>
<span class="line"><span class="s_5">  position</span><span class="s_0">: </span><span class="s_6">fixed</span><span class="s_0">;</span></span>
<span class="line"><span class="s_5">  top</span><span class="s_0">: </span><span class="s_7">50</span><span class="s_1">%</span><span class="s_0">;</span></span>
<span class="line"><span class="s_5">  left</span><span class="s_0">: </span><span class="s_7">50</span><span class="s_1">%</span><span class="s_0">;</span></span>
<span class="line"><span class="s_5">  transform</span><span class="s_0">: </span><span class="s_6">translate</span><span class="s_0">(</span><span class="s_7">-50</span><span class="s_1">%</span><span class="s_0">, </span><span class="s_7">-50</span><span class="s_1">%</span><span class="s_0">);</span></span>
<span class="line"><span class="s_5">  background</span><span class="s_0">: </span><span class="s_6">white</span><span class="s_0">;</span></span>
<span class="line"><span class="s_5">  border</span><span class="s_0">: </span><span class="s_7">1</span><span class="s_1">px</span><span class="s_6"> solid</span><span class="s_6"> black</span><span class="s_0">;</span></span>
<span class="line"><span class="s_0">}</span></span></code></pre></div><style>.s_5{--shiki-light:#0D7BBF;--shiki-light-font-style:italic;--shiki-dark:#66D9EF;--shiki-dark-font-style:italic}.s_6{--shiki-light:#0D7BBF;--shiki-dark:#66D9EF}.s_7{--shiki-light:#7C4DFF;--shiki-dark:#AE81FF}</style><div class=code-block><div class=filename>modal.js</div><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_8">function</span><span class="s_9"> openModal</span><span class="s_0">() {</span></span>
<span class="line"><span class="s_a">  document</span><span class="s_0">.</span><span class="s_9">getElementById</span><span class="s_0">(</span><span class="s_3">"modal"</span><span class="s_0">).</span><span class="s_a">style</span><span class="s_0">.</span><span class="s_a">display</span><span class="s_a"> =</span><span class="s_3"> "block"</span><span class="s_0">;</span></span>
<span class="line"><span class="s_0">}</span></span>
<span class="line"></span>
<span class="line"><span class="s_8">function</span><span class="s_9"> closeModal</span><span class="s_0">() {</span></span>
<span class="line"><span class="s_a">  document</span><span class="s_0">.</span><span class="s_9">getElementById</span><span class="s_0">(</span><span class="s_3">"modal"</span><span class="s_0">).</span><span class="s_a">style</span><span class="s_0">.</span><span class="s_a">display</span><span class="s_a"> =</span><span class="s_3"> "none"</span><span class="s_0">;</span></span>
<span class="line"><span class="s_0">}</span></span>
<span class="line"></span>
<span class="line"><span class="s_a">document</span><span class="s_0">.</span><span class="s_9">getElementById</span><span class="s_0">(</span><span class="s_3">"open-modal"</span><span class="s_0">).</span><span class="s_9">addEventListener</span><span class="s_0">(</span><span class="s_3">"click"</span><span class="s_0">, </span><span class="s_a">openModal</span><span class="s_0">);</span></span>
<span class="line"><span class="s_a">document</span><span class="s_0">.</span><span class="s_9">getElementById</span><span class="s_0">(</span><span class="s_3">"close-modal"</span><span class="s_0">).</span><span class="s_9">addEventListener</span><span class="s_0">(</span><span class="s_3">"click"</span><span class="s_0">, </span><span class="s_a">closeModal</span><span class="s_0">);</span></span></code></pre></div><style>.s_8{--shiki-light:#0D7BBF;--shiki-light-font-style:italic;--shiki-dark:#5BD7FF;--shiki-dark-font-style:italic}.s_9{--shiki-light:#1D8649;--shiki-dark:#7FFF00}.s_a{--shiki-light:#202124;--shiki-dark:#FFFFFF}</style><p>This organization seems to follow separation of concerns, but let&#39;s think about what the <strong><em>actual concerns</em></strong> should be:</p><ol><li><strong>Modal behavior</strong>: Opening, closing, and managing modal state</li><li><strong>Visual presentation</strong>: How the modal appears and animates</li><li><strong>User interaction</strong>: Button clicks, keyboard navigation</li><li><strong>Accessibility</strong>: Focus management, screen reader support</li></ol><p>Notice something important: <strong>every single concern spans across HTML, CSS, and JavaScript</strong>.</p><ul><li>The modal&#39;s opening behavior needs JavaScript logic, CSS display properties, and HTML structure changes</li><li>Adding a feature like &quot;close on escape key&quot; touches HTML (focus management), CSS (styling), and JavaScript (event handling)</li></ul><p><strong>The fundamental problem</strong>: Traditional separation splits by <em>technology</em> (HTML/CSS/JS files), while intent is to split by <em>functional concerns</em>.</p></section><section id=the-fundamental-problem><h2><a href=#the-fundamental-problem>The Fundamental Problem</a></h2><p>When we separate by technology instead of by concern, we create several serious issues:</p><ol><li><p><strong>Fragmented Mental Models</strong></p><p>When you need to understand how the modal works, you must mentally piece together information from three different files. The cognitive overhead increases exponentially with application complexity.</p></li><li><p><strong>Change Amplification</strong></p><p>Adding a simple feature like &quot;auto-close modal when clicking outside&quot; requires changes in HTML (event handling structure), CSS (overlay styling), and JavaScript (event listeners). A single logical change becomes scattered across multiple files.</p></li><li><p><strong>Broken Encapsulation</strong></p><p>Components cannot be truly self-contained when their definition is spread across multiple files. Moving or reusing a modal component requires careful coordination of HTML, CSS, and JavaScript files.</p></li><li><p><strong>Maintenance Overhead</strong></p><p>When technologies are separated, it becomes difficult to ensure consistency. CSS classes can become orphaned when HTML changes, JavaScript can reference DOM elements that no longer exist, and refactoring becomes a cross-file archaeological expedition.</p></li></ol></section><section id=organize-by-functionality><h2><a href=#organize-by-functionality>Organize by Functionality</a></h2><p>Marko&#39;s Tags API embraces a different philosophy: <strong>organize code by feature and functionality, not by technology</strong>.</p><p>Here&#39;s how the same modal component looks in Marko:</p><div class=code-block><div class=filename>modal.marko</div><div class="html html-ts"><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_0">&#x3C;</span><span class="s_6">let</span><span class="s_0">/</span><span class="s_a">open=</span><span class="s_7">false</span><span class="s_0">></span></span>
<span class="line"></span>
<span class="line"><span class="s_0">&#x3C;</span><span class="s_1">button</span><span class="s_5"> onClick</span><span class="s_0">() { </span><span class="s_a">open</span><span class="s_a"> =</span><span class="s_7"> true</span><span class="s_0"> }></span></span>
<span class="line"><span class="s_0">  Open Modal</span></span>
<span class="line"><span class="s_0">&#x3C;/</span><span class="s_1">button</span><span class="s_0">></span></span>
<span class="line"></span>
<span class="line"><span class="s_0">&#x3C;</span><span class="s_1">div</span><span class="s_2"> style</span><span class="s_a">=</span><span class="s_0">{ display: </span><span class="s_a">open</span><span class="s_1"> ?</span><span class="s_3"> "block"</span><span class="s_1"> :</span><span class="s_3"> "none"</span><span class="s_0"> } </span><span class="s_2">class</span><span class="s_a">=</span><span class="s_3">"modal"</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">button</span><span class="s_5"> onClick</span><span class="s_0">() { </span><span class="s_a">open</span><span class="s_a"> =</span><span class="s_7"> false</span><span class="s_0"> }></span></span>
<span class="line"><span class="s_0">    Ã—</span></span>
<span class="line"><span class="s_0">  &#x3C;/</span><span class="s_1">button</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">p</span><span class="s_0">>Modal content...&#x3C;/</span><span class="s_1">p</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">&#x3C;/</span><span class="s_1">div</span><span class="s_0">></span></span>
<span class="line"></span>
<span class="line"><span class="s_0">&#x3C;</span><span class="s_5">style</span><span class="s_0">></span></span>
<span class="line"><span class="s_2">  .modal</span><span class="s_0"> {</span></span>
<span class="line"><span class="s_5">    display</span><span class="s_0">: </span><span class="s_6">none</span><span class="s_0">;</span></span>
<span class="line"><span class="s_5">    position</span><span class="s_0">: </span><span class="s_6">fixed</span><span class="s_0">;</span></span>
<span class="line"><span class="s_5">    top</span><span class="s_0">: </span><span class="s_7">50</span><span class="s_1">%</span><span class="s_0">;</span></span>
<span class="line"><span class="s_5">    left</span><span class="s_0">: </span><span class="s_7">50</span><span class="s_1">%</span><span class="s_0">;</span></span>
<span class="line"><span class="s_5">    transform</span><span class="s_0">: </span><span class="s_6">translate</span><span class="s_0">(</span><span class="s_7">-50</span><span class="s_1">%</span><span class="s_0">, </span><span class="s_7">-50</span><span class="s_1">%</span><span class="s_0">);</span></span>
<span class="line"><span class="s_5">    background</span><span class="s_0">: </span><span class="s_6">white</span><span class="s_0">;</span></span>
<span class="line"><span class="s_5">    border</span><span class="s_0">: </span><span class="s_7">1</span><span class="s_1">px</span><span class="s_6"> solid</span><span class="s_6"> black</span><span class="s_0">;</span></span>
<span class="line"><span class="s_0">  }</span></span>
<span class="line"><span class="s_0">&#x3C;/</span><span class="s_5">style</span><span class="s_0">></span></span></code></pre></div><div class="concise concise-ts"><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_6">let</span><span class="s_0">/</span><span class="s_a">open=</span><span class="s_7">false</span></span>
<span class="line"></span>
<span class="line"><span class="s_1">button</span><span class="s_5"> onClick</span><span class="s_0">() { </span><span class="s_a">open</span><span class="s_a"> =</span><span class="s_7"> true</span><span class="s_0"> } -- Open Modal</span></span>
<span class="line"></span>
<span class="line"><span class="s_1">div</span><span class="s_2">.modal</span><span class="s_2"> style</span><span class="s_a">=</span><span class="s_0">{ display: </span><span class="s_a">open</span><span class="s_1"> ?</span><span class="s_3"> "block"</span><span class="s_1"> :</span><span class="s_3"> "none"</span><span class="s_0"> }</span></span>
<span class="line"><span class="s_1">  button</span><span class="s_5"> onClick</span><span class="s_0">() { </span><span class="s_a">open</span><span class="s_a"> =</span><span class="s_7"> false</span><span class="s_0"> } -- Ã—</span></span>
<span class="line"><span class="s_1">  p</span><span class="s_0"> -- Modal content...</span></span>
<span class="line"></span>
<span class="line"><span class="s_5">style</span><span class="s_0"> --</span></span>
<span class="line"><span class="s_b">  .</span><span class="s_2">modal</span><span class="s_b"> {</span></span>
<span class="line"><span class="s_2">    display</span><span class="s_b">:</span><span class="s_2"> none</span><span class="s_0">;</span></span>
<span class="line"><span class="s_2">    position</span><span class="s_b">:</span><span class="s_2"> fixed</span><span class="s_0">;</span></span>
<span class="line"><span class="s_2">    top</span><span class="s_b">:</span><span class="s_2"> 50</span><span class="s_b">%</span><span class="s_0">;</span></span>
<span class="line"><span class="s_2">    left</span><span class="s_b">:</span><span class="s_2"> 50</span><span class="s_b">%</span><span class="s_0">;</span></span>
<span class="line"><span class="s_2">    transform</span><span class="s_b">:</span><span class="s_2"> translate</span><span class="s_0">(</span><span class="s_1">-</span><span class="s_7">50</span><span class="s_1">%</span><span class="s_0">, </span><span class="s_1">-</span><span class="s_7">50</span><span class="s_1">%</span><span class="s_0">);</span></span>
<span class="line"><span class="s_2">    background</span><span class="s_b">:</span><span class="s_2"> white</span><span class="s_0">;</span></span>
<span class="line"><span class="s_2">    border</span><span class="s_b">:</span><span class="s_2"> 1px</span><span class="s_2"> solid</span><span class="s_2"> black</span><span class="s_0">;</span></span>
<span class="line"><span class="s_b">  }</span></span></code></pre></div></div><style>.s_b{--shiki-light:#202124;--shiki-dark:#F8F8F0}</style><p>Notice how everything related to the modal (state management, DOM structure, event handling, styling) is co-located in a single file. This isn&#39;t a violation of separation of concerns; it&#39;s <strong>better separation of concerns</strong>.</p></section><section id=separation-boundaries><h2><a href=#separation-boundaries>Separation Boundaries</a></h2><p>Instead of separating by technology, Marko encourages separation by actual business concerns:</p><ul><li><strong>Component boundaries</strong>: Each <code>.marko</code> file represents a cohesive piece of functionality</li><li><strong>Feature boundaries</strong>: Related components are grouped together</li><li><strong>Domain boundaries</strong>: Different parts of your application are logically separated</li><li><strong>Abstraction levels</strong>: Lower-level utilities are separated from higher-level components</li></ul><p>This approach delivers measurable improvements:</p><ol><li><p>Cognitive Load Reduction</p><p>When developers need to understand or modify a feature, everything they need is in one place. There&#39;s no mental overhead of tracking relationships across multiple files.</p></li><li><p>Better Encapsulation</p><p>Each component is truly self-contained. You can move a <code>.marko</code> file to a different project, and it brings all its dependencies with it.</p></li><li><p>Easier Refactoring</p><p>When a component needs to change, all the related code is co-located. There&#39;s no risk of forgetting to update a related CSS rule or JavaScript handler in a distant file.</p></li><li><p>Natural Scoping</p><p>Styles and behavior are naturally scoped to their component. This eliminates the global scope pollution that plagues traditional approaches.</p></li></ol><p>Marko doesn&#39;t prescribe where the boundaries should be, it empowers you to define appropriate separations based on your application&#39;s needs. For example, if some functionality like the phone input in this form feels like it is becoming too large:</p><div class=code-block><div class="html html-ts"><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_0">&#x3C;</span><span class="s_1">form</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">label</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">    Phone Number:</span><span class="s_6">${</span><span class="s_3">" "</span><span class="s_6">}</span></span>
<span class="line"><span class="s_0">    &#x3C;</span><span class="s_6">let</span><span class="s_0">/</span><span class="s_a">phoneNumber=</span><span class="s_3">""</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">    &#x3C;</span><span class="s_1">input</span></span>
<span class="line"><span class="s_2">      name</span><span class="s_a">=</span><span class="s_3">"phone"</span></span>
<span class="line"><span class="s_2">      type</span><span class="s_a">=</span><span class="s_3">"tel"</span></span>
<span class="line"><span class="s_2">      value</span><span class="s_a">=phoneNumber</span></span>
<span class="line"><span class="s_5">      valueChange</span><span class="s_0">(</span><span class="s_a">value</span><span class="s_0">) {</span></span>
<span class="line"><span class="s_a">        phoneNumber</span><span class="s_a"> =</span><span class="s_a"> value</span><span class="s_0">.</span><span class="s_9">replace</span><span class="s_0">(</span><span class="s_3">/</span><span class="s_c">\D</span><span class="s_3">/</span><span class="s_1">g</span><span class="s_0">, </span><span class="s_3">''</span><span class="s_0">).</span><span class="s_9">replace</span><span class="s_0">(</span><span class="s_3">/(</span><span class="s_c">\d</span><span class="s_1">{3}</span><span class="s_3">)(</span><span class="s_c">\d</span><span class="s_1">{3}</span><span class="s_3">)(</span><span class="s_c">\d</span><span class="s_1">{4}</span><span class="s_3">)/</span><span class="s_0">, </span><span class="s_3">'($1) $2-$3'</span><span class="s_0">);</span></span>
<span class="line"><span class="s_0">      }></span></span>
<span class="line"><span class="s_0">  &#x3C;/</span><span class="s_1">label</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">button</span><span class="s_2"> type</span><span class="s_a">=</span><span class="s_3">"submit"</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">    Submit</span></span>
<span class="line"><span class="s_0">  &#x3C;/</span><span class="s_1">button</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">&#x3C;/</span><span class="s_1">form</span><span class="s_0">></span></span></code></pre></div><div class="concise concise-ts"><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_1">form</span></span>
<span class="line"><span class="s_1">  label</span></span>
<span class="line"><span class="s_0">    -- Phone Number:</span><span class="s_6">${</span><span class="s_3">" "</span><span class="s_6">}</span></span>
<span class="line"><span class="s_6">    let</span><span class="s_0">/</span><span class="s_a">phoneNumber=</span><span class="s_3">""</span></span>
<span class="line"><span class="s_1">    input</span></span>
<span class="line"><span class="s_0">      ,</span><span class="s_2">name</span><span class="s_a">=</span><span class="s_3">"phone"</span></span>
<span class="line"><span class="s_0">      ,</span><span class="s_2">type</span><span class="s_a">=</span><span class="s_3">"tel"</span></span>
<span class="line"><span class="s_0">      ,</span><span class="s_2">value</span><span class="s_a">=phoneNumber</span></span>
<span class="line"><span class="s_0">      ,</span><span class="s_5">valueChange</span><span class="s_0">(</span><span class="s_a">value</span><span class="s_0">) {</span></span>
<span class="line"><span class="s_a">        phoneNumber</span><span class="s_a"> =</span><span class="s_a"> value</span><span class="s_0">.</span><span class="s_9">replace</span><span class="s_0">(</span><span class="s_3">/</span><span class="s_c">\D</span><span class="s_3">/</span><span class="s_1">g</span><span class="s_0">, </span><span class="s_3">''</span><span class="s_0">).</span><span class="s_9">replace</span><span class="s_0">(</span><span class="s_3">/(</span><span class="s_c">\d</span><span class="s_1">{3}</span><span class="s_3">)(</span><span class="s_c">\d</span><span class="s_1">{3}</span><span class="s_3">)(</span><span class="s_c">\d</span><span class="s_1">{4}</span><span class="s_3">)/</span><span class="s_0">, </span><span class="s_3">'($1) $2-$3'</span><span class="s_0">);</span></span>
<span class="line"><span class="s_0">      }</span></span>
<span class="line"><span class="s_1">  button</span><span class="s_2"> type</span><span class="s_a">=</span><span class="s_3">"submit"</span><span class="s_0"> -- Submit</span></span></code></pre></div></div><style>.s_c{--shiki-light:#8A720A;--shiki-dark:#AE81FF}</style><p>You can extract it into a separate component:</p><div class=code-block><div class=filename>index.marko</div><div class="html html-ts"><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_0">&#x3C;</span><span class="s_1">form</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">label</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">    Phone Number:</span><span class="s_6">${</span><span class="s_3">" "</span><span class="s_6">}</span></span>
<span class="line"><span class="s_0">    &#x3C;</span><span class="s_1">phone-input</span><span class="s_0">/></span></span>
<span class="line"><span class="s_0">  &#x3C;/</span><span class="s_1">label</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">  &#x3C;</span><span class="s_1">button</span><span class="s_2"> type</span><span class="s_a">=</span><span class="s_3">"submit"</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">    Submit</span></span>
<span class="line"><span class="s_0">  &#x3C;/</span><span class="s_1">button</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">&#x3C;/</span><span class="s_1">form</span><span class="s_0">></span></span></code></pre></div><div class="concise concise-ts"><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_1">form</span></span>
<span class="line"><span class="s_1">  label</span></span>
<span class="line"><span class="s_0">    -- Phone Number:</span><span class="s_6">${</span><span class="s_3">" "</span><span class="s_6">}</span></span>
<span class="line"><span class="s_1">    phone-input</span></span>
<span class="line"><span class="s_1">  button</span><span class="s_2"> type</span><span class="s_a">=</span><span class="s_3">"submit"</span><span class="s_0"> -- Submit</span></span></code></pre></div></div><div class=code-block><div class=filename>phone-input.marko</div><div class="html html-ts"><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_0">&#x3C;</span><span class="s_6">let</span><span class="s_0">/</span><span class="s_a">number=</span><span class="s_3">""</span><span class="s_0">></span></span>
<span class="line"><span class="s_0">&#x3C;</span><span class="s_1">input</span></span>
<span class="line"><span class="s_2">  name</span><span class="s_a">=</span><span class="s_3">"phone"</span></span>
<span class="line"><span class="s_2">  type</span><span class="s_a">=</span><span class="s_3">"tel"</span></span>
<span class="line"><span class="s_2">  value</span><span class="s_a">=number</span></span>
<span class="line"><span class="s_5">  valueChange</span><span class="s_0">(</span><span class="s_a">value</span><span class="s_0">) {</span></span>
<span class="line"><span class="s_a">    number</span><span class="s_a"> =</span><span class="s_a"> value</span><span class="s_0">.</span><span class="s_9">replace</span><span class="s_0">(</span><span class="s_3">/</span><span class="s_c">\D</span><span class="s_3">/</span><span class="s_1">g</span><span class="s_0">, </span><span class="s_3">''</span><span class="s_0">).</span><span class="s_9">replace</span><span class="s_0">(</span><span class="s_3">/(</span><span class="s_c">\d</span><span class="s_1">{3}</span><span class="s_3">)(</span><span class="s_c">\d</span><span class="s_1">{3}</span><span class="s_3">)(</span><span class="s_c">\d</span><span class="s_1">{4}</span><span class="s_3">)/</span><span class="s_0">, </span><span class="s_3">'($1) $2-$3'</span><span class="s_0">);</span></span>
<span class="line"><span class="s_0">  }></span></span></code></pre></div><div class="concise concise-ts"><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_6">let</span><span class="s_0">/</span><span class="s_a">number=</span><span class="s_3">""</span></span>
<span class="line"><span class="s_1">input</span></span>
<span class="line"><span class="s_0">  ,</span><span class="s_2">name</span><span class="s_a">=</span><span class="s_3">"phone"</span></span>
<span class="line"><span class="s_0">  ,</span><span class="s_2">type</span><span class="s_a">=</span><span class="s_3">"tel"</span></span>
<span class="line"><span class="s_0">  ,</span><span class="s_2">value</span><span class="s_a">=number</span></span>
<span class="line"><span class="s_0">  ,</span><span class="s_5">valueChange</span><span class="s_0">(</span><span class="s_a">value</span><span class="s_0">) {</span></span>
<span class="line"><span class="s_a">    number</span><span class="s_a"> =</span><span class="s_a"> value</span><span class="s_0">.</span><span class="s_9">replace</span><span class="s_0">(</span><span class="s_3">/</span><span class="s_c">\D</span><span class="s_3">/</span><span class="s_1">g</span><span class="s_0">, </span><span class="s_3">''</span><span class="s_0">).</span><span class="s_9">replace</span><span class="s_0">(</span><span class="s_3">/(</span><span class="s_c">\d</span><span class="s_1">{3}</span><span class="s_3">)(</span><span class="s_c">\d</span><span class="s_1">{3}</span><span class="s_3">)(</span><span class="s_c">\d</span><span class="s_1">{4}</span><span class="s_3">)/</span><span class="s_0">, </span><span class="s_3">'($1) $2-$3'</span><span class="s_0">);</span></span>
<span class="line"><span class="s_0">  }</span></span></code></pre></div></div><p>The framework doesn&#39;t force artificial separations. Instead, it provides the tools to separate concerns at the <strong>logical boundaries</strong> that make sense for your specific application.</p></section><section id=common-objections><h2><a href=#common-objections>Common Objections</a></h2><p>At this point, you might have some concerns. Let&#39;s address the most common ones:</p><section id=this-violates-single-responsibility-principle><h3><a href=#this-violates-single-responsibility-principle>&quot;This Violates Single Responsibility Principle&quot;</a></h3><p>The Single Responsibility Principle states that a class should have only one reason to change. A Marko component typically <em>does</em> have a single responsibility, which is that it implements one piece of user-facing functionality. The fact that it includes HTML, CSS, and JavaScript doesn&#39;t violate SRP any more than a class having both data and methods violates it.</p><p>A modal component has one responsibilityâ€” being a modal. All the HTML structure, CSS styling, and JavaScript behavior serve that single purpose. Splitting these across files doesn&#39;t create better separation; it fragments the implementation of a single concern.</p></section><section id=what-about-reusability><h3><a href=#what-about-reusability>&quot;What About Reusability?&quot;</a></h3><p>Co-location of concerns actually <em>improves</em> reusability. When you want to reuse a component, you get everything it needs in one package. There&#39;s no need to hunt down associated CSS files or JavaScript dependencies.</p><p>Traditional approach:</p><div class=code-block><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_9">â”œâ”€â”€</span><span class="s_0"> modal.html</span></span>
<span class="line"><span class="s_9">â”œâ”€â”€</span><span class="s_0"> modal.css</span></span>
<span class="line"><span class="s_9">â”œâ”€â”€</span><span class="s_0"> modal.js</span></span>
<span class="line"><span class="s_9">â””â”€â”€</span><span class="s_0"> modal-theme.css</span></span></code></pre></div><p>Marko approach:</p><div class=code-block><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_9">â””â”€â”€</span><span class="s_0"> modal.marko</span></span></code></pre></div></section><section id=large-components-are-unwieldy><h3><a href=#large-components-are-unwieldy>&quot;Large Components Are Unwieldy&quot;</a></h3><p>This is a valid concern, but the solution isn&#39;t to separate by technology. It&#39;s to break large components into smaller, more focused components. This is exactly the kind of logical separation that Marko encourages.</p><p>If your component is getting too large, extract logical sub-components:</p><div class=code-block><div class="html html-ts"><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_d">&#x3C;!-- Instead of one giant user-profile.marko, break it down into multiple components --></span></span>
<span class="line"><span class="s_0">&#x3C;</span><span class="s_1">user-avatar</span><span class="s_2"> user</span><span class="s_a">=input</span><span class="s_0">.</span><span class="s_a">user</span><span class="s_0">/></span></span>
<span class="line"><span class="s_0">&#x3C;</span><span class="s_1">user-details</span><span class="s_2"> user</span><span class="s_a">=input</span><span class="s_0">.</span><span class="s_a">user</span><span class="s_0">/></span></span>
<span class="line"><span class="s_0">&#x3C;</span><span class="s_1">user-actions</span><span class="s_2"> user</span><span class="s_a">=input</span><span class="s_0">.</span><span class="s_a">user</span><span class="s_0">/></span></span>
<span class="line"><span class="s_0">&#x3C;</span><span class="s_1">user-preferences</span><span class="s_2"> user</span><span class="s_a">=input</span><span class="s_0">.</span><span class="s_a">user</span><span class="s_0">/></span></span></code></pre></div><div class="concise concise-ts"><pre class="shiki shiki-themes marko-light marko-dark s_4" tabindex="0"><code><span class="line"><span class="s_d">&#x3C;!-- Instead of one giant user-profile.marko, break it down into multiple components --></span></span>
<span class="line"><span class="s_1">user-avatar</span><span class="s_2"> user</span><span class="s_a">=input</span><span class="s_0">.</span><span class="s_a">user</span></span>
<span class="line"><span class="s_1">user-details</span><span class="s_2"> user</span><span class="s_a">=input</span><span class="s_0">.</span><span class="s_a">user</span></span>
<span class="line"><span class="s_1">user-actions</span><span class="s_2"> user</span><span class="s_a">=input</span><span class="s_0">.</span><span class="s_a">user</span></span>
<span class="line"><span class="s_1">user-preferences</span><span class="s_2"> user</span><span class="s_a">=input</span><span class="s_0">.</span><span class="s_a">user</span></span></code></pre></div></div><style>.s_d{--shiki-light:#73738C;--shiki-dark:#8F8F9E}</style><p>This maintains component boundaries based on functionality, not technology.</p></section><section id=this-defies-web-standards><h3><a href=#this-defies-web-standards>&quot;This Defies Web Standards&quot;</a></h3><p>Web standards define the technologies (HTML, CSS, JavaScript) but don&#39;t dictate how they should be organized in source code. The separation was a limitation of the tools, not a requirement of the standards.</p><p>Consider that:</p><ul><li><strong>Web Components</strong> co-locate HTML, CSS, and JavaScript in a single custom element</li><li><strong>CSS-in-JS</strong> brings styling into JavaScript</li><li><strong>Style attributes</strong> have always mixed HTML and CSS</li></ul><p>The web platform itself has been moving toward more integrated approaches.</p></section></section><section id=industry-trends><h2><a href=#industry-trends>Industry Trends</a></h2><p>Marko isn&#39;t alone in this approach. The frontend industry has been moving in this direction for years:</p><ul><li><strong>Vue.js</strong>: Single File Components (SFCs) co-locate template, script, and style</li><li><strong>React</strong>: JSX mixes HTML and JavaScript; CSS-in-JS solutions bring styling closer to components</li><li><strong>Svelte</strong>: Components include markup, styling, and logic in single files</li><li><strong>Angular</strong>: Component decorator co-locates template and styles with the class</li></ul><p>Even in other technology stacks, we see similar patterns:</p><ul><li><strong>iOS</strong>: SwiftUI combines layout and behavior</li><li><strong>Android</strong>: Jetpack Compose merges UI and logic</li><li><strong>Desktop</strong>: Many modern UI frameworks favor component-based approaches</li></ul></section><section id=conclusion><h2><a href=#conclusion>Conclusion</a></h2><p>Marko&#39;s approach isn&#39;t about abandoning separation of concerns, it&#39;s about applying that principle more thoughtfully. Instead of separating by arbitrary technological boundaries, we separate by logical, functional boundaries that align with how developers actually think about and build user interfaces.</p><p>The result is code that&#39;s easier to understand, modify, and maintain. Components become true units of functionality rather than fragmented pieces scattered across multiple files. This approach respects the principle that <strong>related things should be close together</strong>, while still maintaining clear separations where they actually matter.</p><p>The question isn&#39;t whether to separate concerns, but <strong>which concerns to separate</strong> and <strong>where to draw the boundaries</strong>. Marko&#39;s Tags API gives you the flexibility to make those decisions based on your application&#39;s actual needs, not on outdated assumptions about web technology separation.</p></section><section id=further-reading><h2><a href=#further-reading>Further Reading</a></h2><ul><li><a href=./nested-reactivity>Nested Reactivity</a></li><li><a href=./optimizing-performance>Optimizing Performance</a></li></ul></section><hr><section id=_dm><h2 id=contributors><a href=#contributors>Contributors</a></h2><p>Helpful? You can thank these awesome people! You can also edit this doc if you see any issues or want to improve it.</p><script>(e=>(self[e]||(self[e]=(l,f=e+l,s=f.length,a={},d=[],t=document,n=t.createTreeWalker(t,129))=>t=self[e][l]={i:f,d:t,l:a,v:d,x(){},w(e,l,r){for(;e=n.nextNode();)t.x(l=(l=e.data)&&!l.indexOf(f)&&(a[r=l.slice(s+1)]=e,l[s]),r,e),l>"#"&&d.push(e)}}),self[e]))("M")("_");M._.r=[_=>(_.g=[{params:{},url:new URL("http://localhost/docs/explanation/separation-of-concerns")},5,{4:!1},_.h={0:_.a={3:"concise-mode"},1:9,3:_.b={3:"ts-mode"},4:11,38:_.d={10:_.c={"aria-label":"Toggle Concise mode",checked:!1},f3:0},39:_.f={10:_.e={"aria-label":"Toggle TS mode",checked:!1},f3:0},40:!1,41:!1},_.a,1,_.b,55,_.d,{5:{},7:576,8:512},1,_.f,{5:{},7:576,8:512},48,{5:"the-actual-concerns"},{5:"the-fundamental-problem"},{5:"organize-by-functionality"},{5:"separation-boundaries"},{5:"common-objections"},2,{5:"this-violates-single-responsibility-principle"},{5:"what-about-reusability"},{5:"large-components-are-unwieldy"},{5:"this-defies-web-standards"},{5:"industry-trends"},{5:"conclusion"},{5:"further-reading"}],_.a.f=_._.e0(_.a),_.a.e=_._.o2(_.h),_.b.f=_._.e0(_.b),_.b.e=_._.o3(_.h),_.c.checkedChange=_.d.e3=_._.o0(_.h),_.e.checkedChange=_.f.e3=_._.o1(_.h),_.g),"h0",5,"n0",6,"n1",6,"e1",8,10,"c0",67,"q0",66,"c0",70,"q0",69,"o32",7,"o33",7,"o34",7];M._.w()</script><ul><li><a href=https://github.com/LuLaValva><img src=https://avatars.githubusercontent.com/u/26027232?v=4 alt>LuLaValva</a></li><li><a href=https://github.com/marko-js/website-next/blob/main/docs/explanation/separation-of-concerns.md><div><svg viewBox="0 0 448 512"><path d="M256 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 160-160 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l160 0 0 160c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160 160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-160 0 0-160z"></path></svg><!--M_*137 0--></div>You?</a></li></ul></section></article><div class=_de id=page-menu><nav aria-labelledby=sM_1 class=_df id=_dk><ul><li><strong id=sM_1>On this Page</strong></li><li><a href=#the-actual-concerns>The Actual Concerns</a><!--M_*119 0--></li><li><a href=#the-fundamental-problem>The Fundamental Problem</a><!--M_*120 0--></li><li><a href=#organize-by-functionality>Organize by Functionality</a><!--M_*121 0--></li><li><a href=#separation-boundaries>Separation Boundaries</a><!--M_*122 0--></li><li><a href=#common-objections>Common Objections</a><!--M_*123 0--><ul><li><a href=#this-violates-single-responsibility-principle>"This Violates Single Responsibility Principle"</a><!--M_*126 0--></li><li><a href=#what-about-reusability>"What About Reusability?"</a><!--M_*127 0--></li><li><a href=#large-components-are-unwieldy>"Large Components Are Unwieldy"</a><!--M_*128 0--></li><li><a href=#this-defies-web-standards>"This Defies Web Standards"</a><!--M_*129 0--></li></ul></li><li><a href=#industry-trends>Industry Trends</a><!--M_*130 0--></li><li><a href=#conclusion>Conclusion</a><!--M_*131 0--></li><li><a href=#further-reading>Further Reading</a><!--M_*132 0--></li></ul></nav></div></main></div><footer id=_a><a href="https://openjsf.org/" class=_b><img src=/assets/openjsf-u4IcyPV8.svg alt> <span><span class=_e>OpenJS&nbsp;</span><span class=_f>Foundation</span></span></a><div class=_g></div><a href=https://github.com/marko-js/marko/blob/main/LICENSE class=_d><img src=/assets/osi-BEF6Mbrt.svg alt> MIT&nbsp;License</a><div class=_g></div><a href=https://github.com/eBay class=_c><img src=/assets/ebay-CSr9mcj_.svg alt=eBay> open&nbsp;source</a></footer><script>M._.r.push(_=>(_.i=[4,{5:{},7:448,8:512}]),"c0",137,"j0",119,120,121,122,126,127,128,129,123,130,131,132);M._.w()</script></body></html>